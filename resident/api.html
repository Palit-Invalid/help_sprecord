<!--
title: API
description: API для SpRecord SIP Resident
published: true
date: 2023-07-13T12:18:39.933Z
tags: 
editor: ckeditor
dateCreated: 2023-07-13T09:24:20.455Z
-->

<p style="text-align:center;"><span class="text-huge"><strong>Интерфейс прикладного программирования (API)</strong></span></p>
<p style="text-align:center;"><span class="text-huge"><strong>для SIP Resident</strong></span></p>
<p style="text-align:center;"><span class="text-huge">ООО «Сарапульские системы», 2023</span></p>
<hr>
<h1>Общие сведения</h1>
<p>Сервер API по умолчанию работает на TCP порте 9100. Требуется его включение в настройках. Взаимодействие с сервером осуществляется при помощи HTTP-запросов. Запрос может включать дополнительные параметры, упакованные в структуру JSON. В этом случае они передаются методом POST. Ответ содержит структуру JSON, либо файл, в случае если в ответе ожидается файл.</p>
<h2>Запрос</h2>
<p>URI запроса выглядит следующим образом:</p>
<p>http://&lt;<strong>ip</strong>&gt;:&lt;<strong>port</strong>&gt;/&lt;<strong>cmd</strong>&gt;</p>
<p>где <strong>ip</strong> - адрес устройства, <strong>port</strong> - порт сервера API, <strong>cmd</strong> - команда.</p>
<h2>Ответ</h2>
<p>Ответ, представляющий собой структуру JSON имеет 1 обязательное поле <strong>error</strong>.&nbsp;</p>
<p>Пример:</p>
<pre><code class="language-plaintext">{
	“error”: “OK”
}
</code></pre>
<p>&nbsp;</p>
<p>Определены следующие возможные значения этого поля.</p>
<figure class="table" style="float:left;">
  <table style="border-bottom:none;border-left:none;border-right:none;border-top:none;">
    <tbody>
      <tr>
        <td style="border-bottom:1pt solid #000000;border-left:1pt solid #000000;border-right:1pt solid #000000;border-top:1pt solid #000000;padding:5pt;vertical-align:top;">
          <p style="text-align:center;"><strong>Значение</strong></p>
        </td>
        <td style="border-bottom:1pt solid #000000;border-left:1pt solid #000000;border-right:1pt solid #000000;border-top:1pt solid #000000;padding:5pt;vertical-align:top;">
          <p style="text-align:center;"><strong>Пояснение</strong></p>
        </td>
      </tr>
      <tr>
        <td style="border-bottom:1pt solid #000000;border-left:1pt solid #000000;border-right:1pt solid #000000;border-top:1pt solid #000000;padding:5pt;vertical-align:top;">OK</td>
        <td style="border-bottom:1pt solid #000000;border-left:1pt solid #000000;border-right:1pt solid #000000;border-top:1pt solid #000000;padding:5pt;vertical-align:top;">Запрос выполнен без ошибок</td>
      </tr>
      <tr>
        <td style="border-bottom:1pt solid #000000;border-left:1pt solid #000000;border-right:1pt solid #000000;border-top:1pt solid #000000;padding:5pt;vertical-align:top;">PARSE_ERROR</td>
        <td style="border-bottom:1pt solid #000000;border-left:1pt solid #000000;border-right:1pt solid #000000;border-top:1pt solid #000000;padding:5pt;vertical-align:top;">Некорректная структура JSON</td>
      </tr>
      <tr>
        <td style="border-bottom:1pt solid #000000;border-left:1pt solid #000000;border-right:1pt solid #000000;border-top:1pt solid #000000;padding:5pt;vertical-align:top;">WRONG_FUNCTION</td>
        <td style="border-bottom:1pt solid #000000;border-left:1pt solid #000000;border-right:1pt solid #000000;border-top:1pt solid #000000;padding:5pt;vertical-align:top;">Неверное название команды</td>
      </tr>
      <tr>
        <td style="border-bottom:1pt solid #000000;border-left:1pt solid #000000;border-right:1pt solid #000000;border-top:1pt solid #000000;padding:5pt;vertical-align:top;">WRONG_ARGS</td>
        <td style="border-bottom:1pt solid #000000;border-left:1pt solid #000000;border-right:1pt solid #000000;border-top:1pt solid #000000;padding:5pt;vertical-align:top;">Параметры имеют некорректный тип либо их значения выходят за границы диапазона допустимых значений</td>
      </tr>
      <tr>
        <td style="border-bottom:1pt solid #000000;border-left:1pt solid #000000;border-right:1pt solid #000000;border-top:1pt solid #000000;padding:5pt;vertical-align:top;">ARGUMENTS_REQUIRED</td>
        <td style="border-bottom:1pt solid #000000;border-left:1pt solid #000000;border-right:1pt solid #000000;border-top:1pt solid #000000;padding:5pt;vertical-align:top;">Не хватает одного или нескольких обязательных параметров</td>
      </tr>
      <tr>
        <td style="border-bottom:1pt solid #000000;border-left:1pt solid #000000;border-right:1pt solid #000000;border-top:1pt solid #000000;padding:5pt;vertical-align:top;">PROCESSING_ERROR</td>
        <td style="border-bottom:1pt solid #000000;border-left:1pt solid #000000;border-right:1pt solid #000000;border-top:1pt solid #000000;padding:5pt;vertical-align:top;">Во время выполнения запроса произошла ошибка</td>
      </tr>
    </tbody>
  </table>
</figure>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>Если значением поля <strong>error</strong> не является “OK”, то ответ также будет содержать дополнительное строковое поле <strong>error_msg</strong>, которое содержит подробности возникшей ошибки.</p>
<h1>Команды</h1>
<h2>/GetInformation</h2>
<p>Получение информации об устройстве.</p>
<figure class="table">
  <table>
    <tbody>
      <tr>
        <td style="border-bottom:1px solid;border-left:1px solid;border-right:1px solid;border-top:1px solid;"><strong>Параметр</strong></td>
        <td style="border-bottom:1px solid;border-left:1px solid;border-right:1px solid;border-top:1px solid;" colspan="2"><strong>Пояснение</strong></td>
      </tr>
      <tr>
        <td style="border-bottom:1px solid;border-left:1px solid;border-right:1px solid;border-top:1px solid;vertical-align:top;" rowspan="7">tags</td>
        <td style="border-bottom:1px solid;border-left:1px solid;border-right:1px solid;border-top:1px solid;" colspan="2">Обязательный параметр. Массив строковых значений, по которым определяется какие данные необходимо получить. Возможные значения.</td>
      </tr>
      <tr>
        <td style="border-bottom:1px solid #000000;border-left:1px solid #000000;border-right:1px solid #000000;border-top:1px solid #000000;padding:5pt;">
          <p style="text-align:center;"><strong>Значение</strong></p>
        </td>
        <td style="border-bottom:1px solid #000000;border-left:1px solid #000000;border-right:1px solid #000000;border-top:1px solid #000000;padding:5pt;">
          <p style="text-align:center;"><strong>Назначение</strong></p>
        </td>
      </tr>
      <tr>
        <td style="border-bottom:1px solid #000000;border-left:1px solid #000000;border-right:1px solid #000000;border-top:1px solid #000000;padding:5pt;">disk_space</td>
        <td style="border-bottom:1px solid #000000;border-left:1px solid #000000;border-right:1px solid #000000;border-top:1px solid #000000;padding:5pt;">Сведения о занятом пространстве</td>
      </tr>
      <tr>
        <td style="border-bottom:1px solid #000000;border-left:1px solid #000000;border-right:1px solid #000000;border-top:1px solid #000000;padding:5pt;">license</td>
        <td style="border-bottom:1px solid #000000;border-left:1px solid #000000;border-right:1px solid #000000;border-top:1px solid #000000;padding:5pt;">Сведения о лицензии и коде активации</td>
      </tr>
      <tr>
        <td style="border-bottom:1px solid #000000;border-left:1px solid #000000;border-right:1px solid #000000;border-top:1px solid #000000;padding:5pt;">version</td>
        <td style="border-bottom:1px solid #000000;border-left:1px solid #000000;border-right:1px solid #000000;border-top:1px solid #000000;padding:5pt;">Версия ПО</td>
      </tr>
      <tr>
        <td style="border-bottom:1px solid #000000;border-left:1px solid #000000;border-right:1px solid #000000;border-top:1px solid #000000;padding:5pt;">date_time</td>
        <td style="border-bottom:1px solid #000000;border-left:1px solid #000000;border-right:1px solid #000000;border-top:1px solid #000000;padding:5pt;">Текущие дата, время и часовой пояс</td>
      </tr>
      <tr>
        <td style="border-bottom:1px solid #000000;border-left:1px solid #000000;border-right:1px solid #000000;border-top:1px solid #000000;padding:5pt;">devicemark</td>
        <td style="border-bottom:1px solid #000000;border-left:1px solid #000000;border-right:1px solid #000000;border-top:1px solid #000000;padding:5pt;">Метка устройства</td>
      </tr>
    </tbody>
  </table>
</figure>
<h3>Пример</h3>
<pre><code class="language-plaintext">Запрос:
{
	"tags" : [ "disk_space", "license", "version", "date_time", "devicemark" ]
}
Ответ:
{
	"data" : 
	{
		"date_time" : 
		{
			"date" : "29.12.2022",
			"time" : "11:38:19",
			"tz" : "Europe/Moscow"
		},
"devicemark" : "",
		"disk_space" : 
		{
			"total" : "29.68G",
			"used" : "18.18G",
			"used_percent" : 61
		},
		"license" : 
		{
			"activation_code" : "activation_code…",
			"channels" : 1
		},
		"version" : "0.4.0-1"
	},
	"error" : "OK"
}
</code></pre>
<h2>/GetRecordsInfo</h2>
<p>Получает сведения о разговорах и записях.</p>
<p>Все параметры являются необязательными.</p>
<figure class="table">
  <table>
    <tbody>
      <tr>
        <td style="border-bottom:1pt solid #000000;border-left:1pt solid #000000;border-right:1pt solid #000000;border-top:1pt solid #000000;padding:5pt;vertical-align:top;">
          <p style="text-align:center;"><strong>Параметр</strong></p>
        </td>
        <td style="border-bottom:1pt solid #000000;border-left:1pt solid #000000;border-right:1pt solid #000000;border-top:1pt solid #000000;padding:5pt;vertical-align:top;">
          <p style="text-align:center;"><strong>Тип</strong></p>
        </td>
        <td style="border-bottom:1pt solid #000000;border-left:1pt solid #000000;border-right:1pt solid #000000;border-top:1pt solid #000000;padding:5pt;vertical-align:top;" colspan="2">
          <p style="text-align:center;"><strong>Пояснение</strong></p>
        </td>
      </tr>
      <tr>
        <td style="border-bottom:1pt solid #000000;border-left:1pt solid #000000;border-right:1pt solid #000000;border-top:1pt solid #000000;padding:5pt;vertical-align:top;">from</td>
        <td style="border-bottom:1pt solid #000000;border-left:1pt solid #000000;border-right:1pt solid #000000;border-top:1pt solid #000000;padding:5pt;vertical-align:top;">число</td>
        <td style="border-bottom:1pt solid #000000;border-left:1pt solid #000000;border-right:1pt solid #000000;border-top:1pt solid #000000;padding:5pt;vertical-align:top;" colspan="2">Задает с какой из найденных записей начать составлять набор. Нумерация начинается с 0. Значение по умолчанию - 0. Кроме того, можно указать отрицательное значение from для получения последних записей. Например, указав -2, можно получить сведения о 2-х последних записях.</td>
      </tr>
      <tr>
        <td style="border-bottom:1pt solid #000000;border-left:1pt solid #000000;border-right:1pt solid #000000;border-top:1pt solid #000000;padding:5pt;vertical-align:top;">count</td>
        <td style="border-bottom:1pt solid #000000;border-left:1pt solid #000000;border-right:1pt solid #000000;border-top:1pt solid #000000;padding:5pt;vertical-align:top;">число</td>
        <td style="border-bottom:1pt solid #000000;border-left:1pt solid #000000;border-right:1pt solid #000000;border-top:1pt solid #000000;padding:5pt;vertical-align:top;" colspan="2">Задает кол-во получаемых записей. Максимально - 100. Значение по умолчанию - 10. Можно указать 0 для получения только общего кол-ва записей.</td>
      </tr>
      <tr>
        <td style="border-bottom:1pt solid #000000;border-left:1pt solid #000000;border-right:1pt solid #000000;border-top:1pt solid #000000;padding:5pt;vertical-align:top;">callid</td>
        <td style="border-bottom:1pt solid #000000;border-left:1pt solid #000000;border-right:1pt solid #000000;border-top:1pt solid #000000;padding:5pt;vertical-align:top;">строка</td>
        <td style="border-bottom:1pt solid #000000;border-left:1pt solid #000000;border-right:1pt solid #000000;border-top:1pt solid #000000;padding:5pt;vertical-align:top;" colspan="2">SIP-идентификатор разговора</td>
      </tr>
      <tr>
        <td style="border-bottom:1pt solid #000000;border-left:1pt solid #000000;border-right:1pt solid #000000;border-top:1pt solid #000000;padding:5pt;vertical-align:top;">caller_num</td>
        <td style="border-bottom:1pt solid #000000;border-left:1pt solid #000000;border-right:1pt solid #000000;border-top:1pt solid #000000;padding:5pt;vertical-align:top;">строка</td>
        <td style="border-bottom:1pt solid #000000;border-left:1pt solid #000000;border-right:1pt solid #000000;border-top:1pt solid #000000;padding:5pt;vertical-align:top;" colspan="2">Номер вызывающей стороны</td>
      </tr>
      <tr>
        <td style="border-bottom:1pt solid #000000;border-left:1pt solid #000000;border-right:1pt solid #000000;border-top:1pt solid #000000;padding:5pt;vertical-align:top;">called_num</td>
        <td style="border-bottom:1pt solid #000000;border-left:1pt solid #000000;border-right:1pt solid #000000;border-top:1pt solid #000000;padding:5pt;vertical-align:top;">строка</td>
        <td style="border-bottom:1pt solid #000000;border-left:1pt solid #000000;border-right:1pt solid #000000;border-top:1pt solid #000000;padding:5pt;vertical-align:top;" colspan="2">Номер вызываемой стороны</td>
      </tr>
      <tr>
        <td style="border-bottom:1pt solid #000000;border-left:1pt solid #000000;border-right:1pt solid #000000;border-top:1pt solid #000000;padding:5pt;vertical-align:top;">num</td>
        <td style="border-bottom:1pt solid #000000;border-left:1pt solid #000000;border-right:1pt solid #000000;border-top:1pt solid #000000;padding:5pt;vertical-align:top;">строка</td>
        <td style="border-bottom:1pt solid #000000;border-left:1pt solid #000000;border-right:1pt solid #000000;border-top:1pt solid #000000;padding:5pt;vertical-align:top;" colspan="2">Номер любой из сторон. Не сочетается с параметрами caller_num и called_num</td>
      </tr>
      <tr>
        <td style="border-bottom:1pt solid #000000;border-left:1pt solid #000000;border-right:1pt solid #000000;border-top:1pt solid #000000;padding:5pt;vertical-align:top;">caller_name</td>
        <td style="border-bottom:1pt solid #000000;border-left:1pt solid #000000;border-right:1pt solid #000000;border-top:1pt solid #000000;padding:5pt;vertical-align:top;">строка</td>
        <td style="border-bottom:1pt solid #000000;border-left:1pt solid #000000;border-right:1pt solid #000000;border-top:1pt solid #000000;padding:5pt;vertical-align:top;" colspan="2">Имя вызывающей стороны, если определено, в противном случае будет совпадать с caller_num</td>
      </tr>
      <tr>
        <td style="border-bottom:1pt solid #000000;border-left:1pt solid #000000;border-right:1pt solid #000000;border-top:1pt solid #000000;padding:5pt;vertical-align:top;">called_name</td>
        <td style="border-bottom:1pt solid #000000;border-left:1pt solid #000000;border-right:1pt solid #000000;border-top:1pt solid #000000;padding:5pt;vertical-align:top;">строка</td>
        <td style="border-bottom:1pt solid #000000;border-left:1pt solid #000000;border-right:1pt solid #000000;border-top:1pt solid #000000;padding:5pt;vertical-align:top;" colspan="2">Имя вызываемой стороны, если определено, в противном случае будет совпадать с called_num</td>
      </tr>
      <tr>
        <td style="border-bottom:1pt solid #000000;border-left:1pt solid #000000;border-right:1pt solid #000000;border-top:1pt solid #000000;padding:5pt;vertical-align:top;">name</td>
        <td style="border-bottom:1pt solid #000000;border-left:1pt solid #000000;border-right:1pt solid #000000;border-top:1pt solid #000000;padding:5pt;vertical-align:top;">строка</td>
        <td style="border-bottom:1pt solid #000000;border-left:1pt solid #000000;border-right:1pt solid #000000;border-top:1pt solid #000000;padding:5pt;vertical-align:top;" colspan="2">Имя любой из сторон. Не сочетается с параметрами caller_num и called_num</td>
      </tr>
      <tr>
        <td style="border-bottom:1pt solid #000000;border-left:1pt solid #000000;border-right:1pt solid #000000;border-top:1pt solid #000000;padding:5pt;vertical-align:top;" rowspan="7">status</td>
        <td style="border-bottom:1pt solid #000000;border-left:1pt solid #000000;border-right:1pt solid #000000;border-top:1pt solid #000000;padding:5pt;vertical-align:top;" rowspan="7">строка</td>
        <td style="border-bottom:1px solid hsl(0, 0%, 0%);border-left:1px solid hsl(0, 0%, 0%);border-right:1px solid hsl(0, 0%, 0%);border-top:1px solid hsl(0, 0%, 0%);" colspan="2">Статус разговора. Возможные значения</td>
      </tr>
      <tr>
        <td style="border-bottom:2px solid hsl(0, 0%, 0%);border-left:2px solid hsl(0, 0%, 0%);border-right:2px solid hsl(0, 0%, 0%);border-top:2px solid hsl(0, 0%, 0%);">
          <p style="text-align:center;"><strong>Значение</strong></p>
        </td>
        <td style="border-bottom:2px solid hsl(0, 0%, 0%);border-left:2px solid hsl(0, 0%, 0%);border-right:2px solid hsl(0, 0%, 0%);border-top:2px solid hsl(0, 0%, 0%);">
          <p style="text-align:center;"><strong>Назначение</strong></p>
        </td>
      </tr>
      <tr>
        <td style="border-bottom:2px solid hsl(0, 0%, 0%);border-left:2px solid hsl(0, 0%, 0%);border-right:2px solid hsl(0, 0%, 0%);border-top:2px solid hsl(0, 0%, 0%);">STATUS_ANSWERED</td>
        <td style="border-bottom:2px solid hsl(0, 0%, 0%);border-left:2px solid hsl(0, 0%, 0%);border-right:2px solid hsl(0, 0%, 0%);border-top:2px solid hsl(0, 0%, 0%);">Вызов принят</td>
      </tr>
      <tr>
        <td style="border-bottom:2px solid hsl(0, 0%, 0%);border-left:2px solid hsl(0, 0%, 0%);border-right:2px solid hsl(0, 0%, 0%);border-top:2px solid hsl(0, 0%, 0%);">STATUS_MISSED</td>
        <td style="border-bottom:2px solid hsl(0, 0%, 0%);border-left:2px solid hsl(0, 0%, 0%);border-right:2px solid hsl(0, 0%, 0%);border-top:2px solid hsl(0, 0%, 0%);">Вызов пропущен</td>
      </tr>
      <tr>
        <td style="border-bottom:2px solid hsl(0, 0%, 0%);border-left:2px solid hsl(0, 0%, 0%);border-right:2px solid hsl(0, 0%, 0%);border-top:2px solid hsl(0, 0%, 0%);">STATUS_REJECTED</td>
        <td style="border-bottom:2px solid hsl(0, 0%, 0%);border-left:2px solid hsl(0, 0%, 0%);border-right:2px solid hsl(0, 0%, 0%);border-top:2px solid hsl(0, 0%, 0%);">Вызов отклонен</td>
      </tr>
      <tr>
        <td style="border-bottom:2px solid hsl(0, 0%, 0%);border-left:2px solid hsl(0, 0%, 0%);border-right:2px solid hsl(0, 0%, 0%);border-top:2px solid hsl(0, 0%, 0%);">STATUS_UNKNOWN</td>
        <td style="border-bottom:2px solid hsl(0, 0%, 0%);border-left:2px solid hsl(0, 0%, 0%);border-right:2px solid hsl(0, 0%, 0%);border-top:2px solid hsl(0, 0%, 0%);">Статус неизвестен</td>
      </tr>
      <tr>
        <td style="border-bottom:1px solid;border-left:1px solid;border-right:1px solid;border-top:1px solid;" colspan="2">&nbsp;</td>
      </tr>
      <tr>
        <td style="border-bottom:1pt solid #000000;border-left:1pt solid #000000;border-right:1pt solid #000000;border-top:1pt solid #000000;padding:5pt;vertical-align:top;">statuses</td>
        <td style="border-bottom:1pt solid #000000;border-left:1pt solid #000000;border-right:1pt solid #000000;border-top:1pt solid #000000;padding:5pt;vertical-align:top;">массив строк</td>
        <td style="border-bottom:1pt solid #000000;border-left:1pt solid #000000;border-right:1pt solid #000000;border-top:1pt solid #000000;padding:5pt;vertical-align:top;" colspan="2">Массив значений параметров status, не сочетается с параметром status.</td>
      </tr>
      <tr>
        <td style="border-bottom:1px solid #000000;border-left:1px solid #000000;border-right:1px solid #000000;border-top:1px solid #000000;padding:5pt;vertical-align:top;" rowspan="12">error</td>
        <td style="border-bottom:1px solid #000000;border-left:1px solid #000000;border-right:1px solid #000000;border-top:1px solid #000000;padding:5pt;vertical-align:top;" rowspan="12">строка</td>
        <td style="border-bottom:1px solid;border-left:1px solid;border-right:1px solid;border-top:1px solid;" colspan="2">Ошибка или предупреждение. Возможные значения.</td>
      </tr>
      <tr>
        <td style="border-bottom:2px solid #000000;border-left:2px solid #000000;border-right:2px solid #000000;border-top:2px solid #000000;padding:5pt;vertical-align:top;">
          <p style="text-align:center;"><strong>Значение</strong></p>
        </td>
        <td style="border-bottom:2px solid #000000;border-left:2px solid #000000;border-right:2px solid #000000;border-top:2px solid #000000;padding:5pt;vertical-align:top;">
          <p style="text-align:center;"><strong>Назначение</strong></p>
        </td>
      </tr>
      <tr>
        <td style="border-bottom:2px solid #000000;border-left:2px solid #000000;border-right:2px solid #000000;border-top:2px solid #000000;padding:5pt;vertical-align:top;">ERROR_OK</td>
        <td style="border-bottom:2px solid #000000;border-left:2px solid #000000;border-right:2px solid #000000;border-top:2px solid #000000;padding:5pt;vertical-align:top;">Успешно обработано</td>
      </tr>
      <tr>
        <td style="border-bottom:2px solid #000000;border-left:2px solid #000000;border-right:2px solid #000000;border-top:2px solid #000000;padding:5pt;vertical-align:top;">ERROR_MAX_CHANNELS</td>
        <td style="border-bottom:2px solid #000000;border-left:2px solid #000000;border-right:2px solid #000000;border-top:2px solid #000000;padding:5pt;vertical-align:top;">Достигнуто ограничение по кол-ву каналов</td>
      </tr>
      <tr>
        <td style="border-bottom:2px solid #000000;border-left:2px solid #000000;border-right:2px solid #000000;border-top:2px solid #000000;padding:5pt;vertical-align:top;">ERROR_UNSUPPORTED_CODECS</td>
        <td style="border-bottom:2px solid #000000;border-left:2px solid #000000;border-right:2px solid #000000;border-top:2px solid #000000;padding:5pt;vertical-align:top;">В разговоре присутствовали неподдерживаемые&nbsp; кодеки</td>
      </tr>
      <tr>
        <td style="border-bottom:2px solid #000000;border-left:2px solid #000000;border-right:2px solid #000000;border-top:2px solid #000000;padding:5pt;vertical-align:top;">ERROR_UNABLE_TO_PROCESS</td>
        <td style="border-bottom:2px solid #000000;border-left:2px solid #000000;border-right:2px solid #000000;border-top:2px solid #000000;padding:5pt;vertical-align:top;">Ошибка обработки</td>
      </tr>
      <tr>
        <td style="border-bottom:2px solid #000000;border-left:2px solid #000000;border-right:2px solid #000000;border-top:2px solid #000000;padding:5pt;vertical-align:top;">ERROR_NO_MEDIA_DATA</td>
        <td style="border-bottom:2px solid #000000;border-left:2px solid #000000;border-right:2px solid #000000;border-top:2px solid #000000;padding:5pt;vertical-align:top;">Медиаданных не обнаружено</td>
      </tr>
      <tr>
        <td style="border-bottom:2px solid #000000;border-left:2px solid #000000;border-right:2px solid #000000;border-top:2px solid #000000;padding:5pt;vertical-align:top;">ERROR_RECORD_DISABLED</td>
        <td style="border-bottom:2px solid #000000;border-left:2px solid #000000;border-right:2px solid #000000;border-top:2px solid #000000;padding:5pt;vertical-align:top;">Запись отключена в настройках</td>
      </tr>
      <tr>
        <td style="border-bottom:2px solid #000000;border-left:2px solid #000000;border-right:2px solid #000000;border-top:2px solid #000000;padding:5pt;vertical-align:top;">ERROR_DECLINED_BY_LIST</td>
        <td style="border-bottom:2px solid #000000;border-left:2px solid #000000;border-right:2px solid #000000;border-top:2px solid #000000;padding:5pt;vertical-align:top;">Запись не произведена, т.к. абонент входит в “черный”/”белый” список</td>
      </tr>
      <tr>
        <td style="border-bottom:2px solid #000000;border-left:2px solid #000000;border-right:2px solid #000000;border-top:2px solid #000000;padding:5pt;vertical-align:top;">ERROR_RECORD_TOO_SHORT</td>
        <td style="border-bottom:2px solid #000000;border-left:2px solid #000000;border-right:2px solid #000000;border-top:2px solid #000000;padding:5pt;vertical-align:top;">Запись слишком короткая</td>
      </tr>
      <tr>
        <td style="border-bottom:2px solid #000000;border-left:2px solid #000000;border-right:2px solid #000000;border-top:2px solid #000000;padding:5pt;vertical-align:top;">ERROR_UNKNOWN</td>
        <td style="border-bottom:2px solid #000000;border-left:2px solid #000000;border-right:2px solid #000000;border-top:2px solid #000000;padding:5pt;vertical-align:top;">Неизвестная ошибка</td>
      </tr>
      <tr>
        <td style="border-bottom:1px solid;border-left:1px solid;border-right:1px solid;border-top:1px solid;" colspan="2">&nbsp;</td>
      </tr>
      <tr>
        <td style="border-bottom:1pt solid #000000;border-left:1pt solid #000000;border-right:1pt solid #000000;border-top:1pt solid #000000;padding:5pt;vertical-align:top;">errors</td>
        <td style="border-bottom:1pt solid #000000;border-left:1pt solid #000000;border-right:1pt solid #000000;border-top:1pt solid #000000;padding:5pt;vertical-align:top;">массив строк</td>
        <td style="border-bottom:1pt solid #000000;border-left:1pt solid #000000;border-right:1pt solid #000000;border-top:1pt solid #000000;padding:5pt;vertical-align:top;" colspan="2">Массив значений параметров error, не сочетается с параметром error.</td>
      </tr>
      <tr>
        <td style="border-bottom:1pt solid #000000;border-left:1pt solid #000000;border-right:1pt solid #000000;border-top:1pt solid #000000;padding:5pt;vertical-align:top;">since</td>
        <td style="border-bottom:1pt solid #000000;border-left:1pt solid #000000;border-right:1pt solid #000000;border-top:1pt solid #000000;padding:5pt;vertical-align:top;">строка</td>
        <td style="border-bottom:1pt solid #000000;border-left:1pt solid #000000;border-right:1pt solid #000000;border-top:1pt solid #000000;padding:5pt;vertical-align:top;" colspan="2">Начало диапазона дат в формате “yyyy-MM-dd hh-mm-ss”</td>
      </tr>
      <tr>
        <td style="border-bottom:1pt solid #000000;border-left:1pt solid #000000;border-right:1pt solid #000000;border-top:1pt solid #000000;padding:5pt;vertical-align:top;">until</td>
        <td style="border-bottom:1pt solid #000000;border-left:1pt solid #000000;border-right:1pt solid #000000;border-top:1pt solid #000000;padding:5pt;vertical-align:top;">строка</td>
        <td style="border-bottom:1pt solid #000000;border-left:1pt solid #000000;border-right:1pt solid #000000;border-top:1pt solid #000000;padding:5pt;vertical-align:top;" colspan="2">Конец диапазона дат в формате “yyyy-MM-dd hh-mm-ss”</td>
      </tr>
      <tr>
        <td style="border-bottom:1pt solid #000000;border-left:1pt solid #000000;border-right:1pt solid #000000;border-top:1pt solid #000000;padding:5pt;vertical-align:top;">duration_min</td>
        <td style="border-bottom:1pt solid #000000;border-left:1pt solid #000000;border-right:1pt solid #000000;border-top:1pt solid #000000;padding:5pt;vertical-align:top;">число</td>
        <td style="border-bottom:1pt solid #000000;border-left:1pt solid #000000;border-right:1pt solid #000000;border-top:1pt solid #000000;padding:5pt;vertical-align:top;" colspan="2">Минимальная длительность</td>
      </tr>
      <tr>
        <td style="border-bottom:1pt solid #000000;border-left:1pt solid #000000;border-right:1pt solid #000000;border-top:1pt solid #000000;padding:5pt;vertical-align:top;">duration_max</td>
        <td style="border-bottom:1pt solid #000000;border-left:1pt solid #000000;border-right:1pt solid #000000;border-top:1pt solid #000000;padding:5pt;vertical-align:top;">число</td>
        <td style="border-bottom:1pt solid #000000;border-left:1pt solid #000000;border-right:1pt solid #000000;border-top:1pt solid #000000;padding:5pt;vertical-align:top;" colspan="2">Максимальная длительность</td>
      </tr>
      <tr>
        <td style="border-bottom:1px solid #000000;border-left:1px solid #000000;border-right:1px solid #000000;border-top:1px solid #000000;padding:5pt;vertical-align:top;" rowspan="9">order_by</td>
        <td style="border-bottom:1px solid #000000;border-left:1px solid #000000;border-right:1px solid #000000;border-top:1px solid #000000;padding:5pt;vertical-align:top;" rowspan="9">массив объектов</td>
        <td style="border-bottom:1px solid;border-left:1px solid;border-right:1px solid;border-top:1px solid;" colspan="2">
          <p>Критерии сортировки записей. Массив содержит объекты с критерием сортировки и ее направлением (asc или desc).</p>
          <p>Пример объекта:</p>
          <p>{“caller_num”: “asc”}</p>
          <p>Порядок объектов в массиве имеет значение.</p>
        </td>
      </tr>
      <tr>
        <td style="border-bottom:2px solid #000000;border-left:2px solid #000000;border-right:2px solid #000000;border-top:2px solid #000000;padding:5pt;vertical-align:top;">
          <p style="text-align:center;"><strong>Значение</strong></p>
        </td>
        <td style="border-bottom:2px solid #000000;border-left:2px solid #000000;border-right:2px solid #000000;border-top:2px solid #000000;padding:5pt;vertical-align:top;">
          <p style="text-align:center;"><strong>Критерий сортировки</strong></p>
        </td>
      </tr>
      <tr>
        <td style="border-bottom:2px solid #000000;border-left:2px solid #000000;border-right:2px solid #000000;border-top:2px solid #000000;padding:5pt;vertical-align:top;">caller_num</td>
        <td style="border-bottom:2px solid #000000;border-left:2px solid #000000;border-right:2px solid #000000;border-top:2px solid #000000;padding:5pt;vertical-align:top;">По номеру вызывающей стороны</td>
      </tr>
      <tr>
        <td style="border-bottom:2px solid #000000;border-left:2px solid #000000;border-right:2px solid #000000;border-top:2px solid #000000;padding:5pt;vertical-align:top;">called_num</td>
        <td style="border-bottom:2px solid #000000;border-left:2px solid #000000;border-right:2px solid #000000;border-top:2px solid #000000;padding:5pt;vertical-align:top;">По номеру вызываемой стороны</td>
      </tr>
      <tr>
        <td style="border-bottom:2px solid #000000;border-left:2px solid #000000;border-right:2px solid #000000;border-top:2px solid #000000;padding:5pt;vertical-align:top;">caller_name</td>
        <td style="border-bottom:2px solid #000000;border-left:2px solid #000000;border-right:2px solid #000000;border-top:2px solid #000000;padding:5pt;vertical-align:top;">По имени вызывающей стороны</td>
      </tr>
      <tr>
        <td style="border-bottom:2px solid #000000;border-left:2px solid #000000;border-right:2px solid #000000;border-top:2px solid #000000;padding:5pt;vertical-align:top;">called_name</td>
        <td style="border-bottom:2px solid #000000;border-left:2px solid #000000;border-right:2px solid #000000;border-top:2px solid #000000;padding:5pt;vertical-align:top;">По имени&nbsp; вызываемой стороны</td>
      </tr>
      <tr>
        <td style="border-bottom:2px solid #000000;border-left:2px solid #000000;border-right:2px solid #000000;border-top:2px solid #000000;padding:5pt;vertical-align:top;">date</td>
        <td style="border-bottom:2px solid #000000;border-left:2px solid #000000;border-right:2px solid #000000;border-top:2px solid #000000;padding:5pt;vertical-align:top;">По дате (по умолчанию)</td>
      </tr>
      <tr>
        <td style="border-bottom:2px solid #000000;border-left:2px solid #000000;border-right:2px solid #000000;border-top:2px solid #000000;padding:5pt;vertical-align:top;">duration</td>
        <td style="border-bottom:2px solid #000000;border-left:2px solid #000000;border-right:2px solid #000000;border-top:2px solid #000000;padding:5pt;vertical-align:top;">По длительности</td>
      </tr>
      <tr>
        <td style="border-bottom:1px solid;border-left:1px solid;border-right:1px solid;border-top:1px solid;" colspan="2">&nbsp;</td>
      </tr>
    </tbody>
  </table>
</figure>
<p>&nbsp;</p>
<p>Ответ на запрос будет содержать следующее.</p>
<figure class="table">
  <table>
    <tbody>
      <tr>
        <td style="border-bottom:1px solid;border-left:1px solid;border-right:1px solid;border-top:1px solid;">
          <p style="text-align:center;"><strong>Поле</strong></p>
        </td>
        <td style="border-bottom:1pt solid #000000;border-left:1pt solid #000000;border-right:1pt solid #000000;border-top:1pt solid #000000;padding:5pt;vertical-align:top;" colspan="2">
          <p style="text-align:center;"><strong>Пояснение</strong></p>
        </td>
      </tr>
      <tr>
        <td style="border-bottom:1px solid;border-left:1px solid;border-right:1px solid;border-top:1px solid;">from</td>
        <td style="border-bottom:1pt solid #000000;border-left:1pt solid #000000;border-right:1pt solid #000000;border-top:1pt solid #000000;padding:5pt;vertical-align:top;" colspan="2">Переданный параметр from</td>
      </tr>
      <tr>
        <td style="border-bottom:1px solid;border-left:1px solid;border-right:1px solid;border-top:1px solid;">count</td>
        <td style="border-bottom:1pt solid #000000;border-left:1pt solid #000000;border-right:1pt solid #000000;border-top:1pt solid #000000;padding:5pt;vertical-align:top;" colspan="2">Кол-во возвращаемых элементов</td>
      </tr>
      <tr>
        <td style="border-bottom:1px solid;border-left:1px solid;border-right:1px solid;border-top:1px solid;">total_count</td>
        <td style="border-bottom:1pt solid #000000;border-left:1pt solid #000000;border-right:1pt solid #000000;border-top:1pt solid #000000;padding:5pt;vertical-align:top;" colspan="2">Общее кол-во элементов, подходящий под заданные критерии</td>
      </tr>
      <tr>
        <td style="border-bottom:1px solid;border-left:1px solid;border-right:1px solid;border-top:1px solid;vertical-align:top;" rowspan="15">records</td>
        <td colspan="2">Массив объектов, содержащих сведения о записях. Объекты следующие.</td>
      </tr>
      <tr>
        <td style="border-bottom:2pt solid #000000;border-left:2pt solid #000000;border-right:2pt solid #000000;border-top:2pt solid #000000;padding:5pt;vertical-align:top;">
          <p style="text-align:center;"><strong>Поле</strong></p>
        </td>
        <td style="border-bottom:2pt solid #000000;border-left:2pt solid #000000;border-right:2pt solid #000000;border-top:2pt solid #000000;padding:5pt;vertical-align:top;">
          <p style="text-align:center;"><strong>Пояснение</strong></p>
        </td>
      </tr>
      <tr>
        <td style="border-bottom:2pt solid #000000;border-left:2pt solid #000000;border-right:2pt solid #000000;border-top:2pt solid #000000;padding:5pt;vertical-align:top;">cid</td>
        <td style="border-bottom:2pt solid #000000;border-left:2pt solid #000000;border-right:2pt solid #000000;border-top:2pt solid #000000;padding:5pt;vertical-align:top;">Идентификатор записи</td>
      </tr>
      <tr>
        <td style="border-bottom:2pt solid #000000;border-left:2pt solid #000000;border-right:2pt solid #000000;border-top:2pt solid #000000;padding:5pt;vertical-align:top;">callid</td>
        <td style="border-bottom:2pt solid #000000;border-left:2pt solid #000000;border-right:2pt solid #000000;border-top:2pt solid #000000;padding:5pt;vertical-align:top;">SIP-идентификатор разговора</td>
      </tr>
      <tr>
        <td style="border-bottom:2pt solid #000000;border-left:2pt solid #000000;border-right:2pt solid #000000;border-top:2pt solid #000000;padding:5pt;vertical-align:top;">caller_num</td>
        <td style="border-bottom:2pt solid #000000;border-left:2pt solid #000000;border-right:2pt solid #000000;border-top:2pt solid #000000;padding:5pt;vertical-align:top;">Номер вызывающей стороны</td>
      </tr>
      <tr>
        <td style="border-bottom:2pt solid #000000;border-left:2pt solid #000000;border-right:2pt solid #000000;border-top:2pt solid #000000;padding:5pt;vertical-align:top;">called_num</td>
        <td style="border-bottom:2pt solid #000000;border-left:2pt solid #000000;border-right:2pt solid #000000;border-top:2pt solid #000000;padding:5pt;vertical-align:top;">Номер вызываемой стороны</td>
      </tr>
      <tr>
        <td style="border-bottom:2pt solid #000000;border-left:2pt solid #000000;border-right:2pt solid #000000;border-top:2pt solid #000000;padding:5pt;vertical-align:top;">caller_name</td>
        <td style="border-bottom:2pt solid #000000;border-left:2pt solid #000000;border-right:2pt solid #000000;border-top:2pt solid #000000;padding:5pt;vertical-align:top;">Имя вызывающей стороны, если определено, либо будет совпадать с caller_num</td>
      </tr>
      <tr>
        <td style="border-bottom:2pt solid #000000;border-left:2pt solid #000000;border-right:2pt solid #000000;border-top:2pt solid #000000;padding:5pt;vertical-align:top;">called_name</td>
        <td style="border-bottom:2pt solid #000000;border-left:2pt solid #000000;border-right:2pt solid #000000;border-top:2pt solid #000000;padding:5pt;vertical-align:top;">Имя вызываемой стороны, если определено, либо будет совпадать с called_num</td>
      </tr>
      <tr>
        <td style="border-bottom:2pt solid #000000;border-left:2pt solid #000000;border-right:2pt solid #000000;border-top:2pt solid #000000;padding:5pt;vertical-align:top;">status</td>
        <td style="border-bottom:2pt solid #000000;border-left:2pt solid #000000;border-right:2pt solid #000000;border-top:2pt solid #000000;padding:5pt;vertical-align:top;">Статус разговора</td>
      </tr>
      <tr>
        <td style="border-bottom:2pt solid #000000;border-left:2pt solid #000000;border-right:2pt solid #000000;border-top:2pt solid #000000;padding:5pt;vertical-align:top;">error</td>
        <td style="border-bottom:2pt solid #000000;border-left:2pt solid #000000;border-right:2pt solid #000000;border-top:2pt solid #000000;padding:5pt;vertical-align:top;">Ошибка или предупреждение</td>
      </tr>
      <tr>
        <td style="border-bottom:2pt solid #000000;border-left:2pt solid #000000;border-right:2pt solid #000000;border-top:2pt solid #000000;padding:5pt;vertical-align:top;">date</td>
        <td style="border-bottom:2pt solid #000000;border-left:2pt solid #000000;border-right:2pt solid #000000;border-top:2pt solid #000000;padding:5pt;vertical-align:top;">Дата в формате “yyyy-MM-dd hh-mm-ss”</td>
      </tr>
      <tr>
        <td style="border-bottom:2pt solid #000000;border-left:2pt solid #000000;border-right:2pt solid #000000;border-top:2pt solid #000000;padding:5pt;vertical-align:top;">duration</td>
        <td style="border-bottom:2pt solid #000000;border-left:2pt solid #000000;border-right:2pt solid #000000;border-top:2pt solid #000000;padding:5pt;vertical-align:top;">Длительность</td>
      </tr>
      <tr>
        <td style="border-bottom:2pt solid #000000;border-left:2pt solid #000000;border-right:2pt solid #000000;border-top:2pt solid #000000;padding:5pt;vertical-align:top;">content_type</td>
        <td style="border-bottom:2pt solid #000000;border-left:2pt solid #000000;border-right:2pt solid #000000;border-top:2pt solid #000000;padding:5pt;vertical-align:top;">Тип контента файла записи: “audio/wav”, “audio/mpeg”, либо пустое значение если файл отсутствует</td>
      </tr>
      <tr>
        <td style="border-bottom:2pt solid #000000;border-left:2pt solid #000000;border-right:2pt solid #000000;border-top:2pt solid #000000;padding:5pt;vertical-align:top;">size</td>
        <td style="border-bottom:2pt solid #000000;border-left:2pt solid #000000;border-right:2pt solid #000000;border-top:2pt solid #000000;padding:5pt;vertical-align:top;">Размер файла</td>
      </tr>
      <tr>
        <td colspan="2">&nbsp;</td>
      </tr>
    </tbody>
  </table>
</figure>
<p>&nbsp;</p>
<pre><code class="language-plaintext">Пример
Запрос:
{
"count": 5,
"num": "123",
"status": "STATUS_ANSWERED",
"order_by": [{"duration":"desc"}, {"date":"desc"}]
}
Ответ:
{
	"data" : 
	{
		"count" : 2,
		"from" : 0,
		"records" : 
		[
			{
				"called_name" : "123",
				"called_num" : "123",
				"caller_name" : "124",
				"caller_num" : "124",
				"callid" : "OpcePgxR4.4sxaXBdoezmGVPecQ08vJF",
				"content_type" : "audio/mpeg",
				"date" : "2016-11-30 19:47:23",
				"duration" : 12,
				"error" : "ERROR_OK",
				"cid" : "2",
				"size" : 51840,
				"status" : "STATUS_ANSWERED"
			},
			{
				"called_name" : "124",
				"called_num" : "124",
				"caller_name" : "Alexey",
				"caller_num" : "123",
				"callid" : "f048f0cd4f5d4398a4672295875aa1c9",
				"content_type" : "",
				"date" : "2022-12-12 16:34:08",
				"duration" : 0,
				"error" : "ERROR_OK",
				"cid" : "787454545",
				"size" : 0,
				"status" : "STATUS_ANSWERED"
			}
		],
		"total_count" : 2
	},
	"error" : "OK"
}
</code></pre>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
