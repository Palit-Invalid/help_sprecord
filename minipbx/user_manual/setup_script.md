---
title: Настройка сценариев
description: 
published: true
date: 2021-04-06T15:38:19.455Z
tags: 
editor: markdown
dateCreated: 2021-04-06T15:38:15.805Z
---

# Описание
Сценарии представляют собой алгоритм действий, который будет выполняться при входящих, исходящих звонках и при звонках с экстренных номеров.
Сценарии делятся на три типа:
1. ***from_local*** - вызывается при звонке с внутренних номеров
2. ***from_inbound*** - вызывается при входящем звонке на внешнии линии
3. ***from_extra*** - вызывается при звонке с исключительных номеров

# Сценарии по умолчанию
> Ниже приведены сценарии, которые используются по умолчанию. Если вы их отредактировали и хотите вернуть в исходное состояние, то достаточно удалить испорченный сценарий - на его месте появится сценарий с настройками по умолчанию.
{.is-info}

## from_local - вызов с локального номера
Вызов набранного номера:
1. Разговор - абонент ответил на вызов
2. Занято - при занятости сотрудника выполнить: действие - произносится фраза "Номер занят", действие - "Положить трубку"
3. Таймаут - при неответе сотрудника указанное время выполнить: действие - произносится фраза "Номер не отвечает", действие - "Положить трубку"
4. Недоступен - телефон отключен или недоступен выполнить: действие - произносится фраза "Номер не доступен", действие - "Положить трубку"

## from_inbound - вызов с внешней линии
1. IVR меню - выполнить: действие - произносится фраза "Наберите номер"
2. Любая другая клавиша - введён не правильный или запрещённый номер выполнить: действие - произносится фраза "Номер не существует", действие - "Положить трубку"
3. Таймаут - в указанное время не производился набор номера выполнить: действие - произносится фраза "Время ожидания истекло", действие - "Положить трубку"
4. Донабор номера - при наборе внутреннего номера вызов абонента

## from_extra - вызов с исключительного номера
Набор номера АТС указанного для работы с исключительными номерами:
1. IVR меню - выполнить: действие - произносится фраза "Введите номер назначения"
2. Любая другая клавиша - введён не правильный или запрещённый номер выполнить: действие - произносится фраза "Неправильно набран номер", действие - "Возврат в IVR меню"
3. Таймаут - в указанное время не производился набор номера выполнить: действие - произносится фраза "Время ожидания истекло", действие - положить трубку

Донабор номера - введён правильный внешний номер или внутреннего абоненат АТС, действия:
1. Занято - при занятости сотрудника выполнить: действие - произносится фраза "Номер занят", действие - "Возврат в IVR меню"
2. Таймаут - при неответе сотрудника указанное время выполнить: действие - произносится фраза "Номер не отвечает", действие - "Возврат в IVR меню"
3. Недоступен - телефон отключен или недоступен выполнить: действие - произносится фраза "Номер не доступен", действие - "Возврат в IVR меню"
4. Разговор - абонент ответил на вызов

# Пример настройки сценария
## Создание сценария
1. Откройте вкладку меню ```Сценарии```.
2. Нажмите ![plus](/minipbx/icons/plus.png) в правом верхнем углу.
3. Введите ```Название``` сценария - любой номер или имя (только латиница).
4. Введите ```Номер``` сценария - любой номер, данный номер дополнительно можно использовать для тестирования маршрута АТС после настройки.
5. Нажмите значок ```Выбор внешних линии``` ![](/minipbx/icons/trunk_b.png =25x25) - значок добавится в основном поле настройки.
6. Нажмите надпись ```Не выбрано```.
7. Выберите линии, которые будут использоваться в данном сценарии, нажмите ```ОК```, список выбранных линии будет указан в поле значка .
8. Нажмите ![plus](/minipbx/icons/plus.png) под списком выбранных линии.
9. Нажмите значок ```Вызов абонента или группы``` ![dial](/minipbx/icons/dial.png =25x25).
10. Выберите абонентов, которые будут отвечать на звонки по данной линии.
11. Нажмите ```ОК``` - модуль появится в поле сценария.
12. Нажмите ```ОК``` - сценарий появится в списке доступных.

У вас должен получиться следующий сценарий:
![example_script.jpg](/minipbx/screenshots/example_script.jpg)

## Применение сценария
1. Откройте меню ```Сценарии```.
2. Найдите строчку ```from_inbound - вызов с внешней линии``` и нажмите два раза.
3. Нажмите на модуль ```IVR меню``` и выберите строку ```Удалить все```.
4. Нажмите ![plus](/minipbx/icons/plus.png) под значком начало выполнения сценария.
5. Нажмите значок ```Выполнить сценарии``` ![script_exec](/minipbx/icons/script.png =25x25).
6. Выберите из выпадающего списка ```Сценарий```, который хотите применить.
7. Нажмите ```ОК```, имя сценария будет указано в поле значка .
8. Нажмите ```ОК``` - сценарий применен.

> Теперь можно принимать входящие звонки и осуществлять исходящие вызовы. Для просмотра настройки всех модулей сценария перейдите в раздел описание сценария {.is-success}