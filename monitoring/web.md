---
title: Проверка работы веб-интерфейса
description: Добавление проверки активности веб-интерфейса
published: true
date: 2022-06-16T04:21:49.347Z
tags: sprecord zabbix мониторинг
editor: markdown
dateCreated: 2021-12-29T06:50:37.472Z
---

# Проверка работы веб-интерфейса устройства
Данная проверка позволяет диагностировать внутреннее состояние устройства записи SpRecord M/MT. Иногда бывают случаи, когда устройство доступно по сети (отвечает на запросы ICMP), но в силу каких-то причин (ошибки, сбои, зависание программной части и т.п.) оказывается неработоспособно и не производит запись. Диагностировать подобные проблемы можно путём опроса веб-интерфейса устройства. Система мониторинга отправляет запрос на TCP-порт 80, и, если ответа от устройства нет, генерирует соответствующее уведомление администратору. Настройка подобного опроса описана ниже.

1. В разделе ```Configuration``` - ```Hosts``` найдите нужное устройство и щёлкните по его имени, чтобы открыть окно конфигурации.
2. Перейдите на вкладку ```Items``` и нажмите кнопку ```Create item``` в правом верхнем углу.
3. В поле ```Name``` задайте уникальное имя проверки, в поле ```Type``` укажите тип ```Simple check```, а в поле ```Key``` выберите из списка вид проверки: ```net.tcp.service[service,<ip>,<port>]```.
4. Укажите тип проверяемого сервиса (```http```), IP-адрес устройства и порт, на котором работает веб-интерфейс (```80```), в поле ```Key```, затем нажмите кнопку ```Add``` в нижней части окна.

![add_item_web_interface.png](/zabbix/add_item_web_interface.png)

5. Далее необходимо создать триггер для уведомления администраторов в случае, если веб-интерфейс не отвечает. Снова откройте свойства хоста, щёлкнув по его имени в разделе ```Configuration``` - ```Hosts```, и перейдите на вкладку ```Triggers```.
6. Нажмите кнопку ```Create trigger``` для создания нового триггера и задайте ему название в поле ```Name```.
7. Нажмите кнопку ```Add``` в поле ```Expression```, чтобы добавить выражение для триггера, в открывшемся окне выберите ранее созданную проверку (```Item```) веб-интерфейса, заполните остальные поля согласно скриншоту и нажмите ```Insert```.

![add_trigger_expression.png](/zabbix/add_trigger_expression.png)

8. В поле ```Severity``` выберите класс проблемы (можно установить, например, ```High```) и сохраните получившийся триггер, нажав ```Add```.

![add_trigger.png](/zabbix/add_trigger.png)

В результате система мониторинга будет регулярно опрашивать веб-интерфейс устройства и в случае отсутствия ответа уведомит администраторов о возникновении проблемы.