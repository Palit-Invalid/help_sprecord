---
title: Мониторинг устройств SpRecord M/MT
description: На основе шаблона
published: true
date: 2022-06-16T14:30:12.487Z
tags: sprecord zabbix мониторинг
editor: markdown
dateCreated: 2022-02-02T07:16:27.790Z
---

# Данные для мониторинга
Мониторинг систем записи SpRecord M/MT на основе шаблона (template) позволяет наблюдать за следующими параметрами устройств:
- доступность устройства по сети;
- время отклика (RTT);
- модель и серийный номер устройства;
- версия микропрограммы (прошивки);
- количество записей на устройстве;
- дата и время последней записи;
- объем свободного места;
- состояние каналов устройства (подключена линия или нет);
- работа веб-интерфейса.

В шаблоне предусмотрен следующий набор триггеров, при срабатывании которых Zabbix будет фиксировать проблему и отправлять уведомление администратору:
- устройство недоступно по сети, сетевая задержка слишком велика или фиксируются потери пакетов;
- отсутствие отклика веб-интерфейса устройства;
- заканчивается свободное место на накопителе;
- отсутствие новых записей в течение определённого времени;
- отключение линии на канале (статус "Нет линии").
# Получение шаблона (template) для системы мониторинга
Шаблон можно запросить у службы технической поддержки по электронной почте: support@sprecord.ru.
# Импортирование шаблона в Zabbix
1. В системе Zabbix перейдите в раздел ```Configuration``` - ```Templates``` и нажмите кнопку ```Import``` в верхнем правом углу.
2. В открывшемся окне выберите файл шаблона и ещё раз нажмите ```Import```.
3. Откроется ещё одно окно с подробным описанием содержимого шаблона, там также нажмите ```Import```.
4. Если всё прошло успешно, в списке шаблонов должен появиться шаблон под названием ```SpRecord MT```.
# Добавление устройства на основе шаблона
1. Откройте раздел ```Configuration``` - ```Hosts``` и нажмите кнопку ```Create host``` в верхнем правом углу.
2. Задайте имя устройства в поле ```Host name```, выберите хотя бы одну группу в поле ```Groups``` и добавьте интерфейс типа ```Agent```, где укажите IP-адрес устройства.
![add_host_mt.png](/zabbix/add_host_mt.png)
3. Перейдите на вкладку ```Templates```, где в поле ```Link new templates``` добавьте ранее импортированный шаблон ```SpRecord MT```.
![add_host_mt_template.png](/zabbix/add_host_mt_template.png)
4. Нажмите кнопку ```Add``` для завершения процесса.

Если на устройстве SpRecord M/MT включена авторизация (доступ по имени/паролю), необходимо добавить реквизиты доступа в конфигурацию устройства в Zabbix.

1. В разделе ```Configuration``` - ```Hosts``` откройте добавленное ранее устройство и перейдите на влкдаку ```Macros```.
2. Нажмите ```Inherited and host macros```, чтобы отобразить макросы, наследуемые из шаблона.
3. Заполните имя пользователя и пароль в макросах ```{$SP_USERNAME}``` и ```{$SP_PASSWORD}``` соответственно, после чего нажмите ```Update``` для сохранения внесённых изменений.
![add_host_mt_credentials.png](/zabbix/add_host_mt_credentials.png)